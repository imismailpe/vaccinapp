{"version":3,"sources":["App.js","reportWebVitals.js","index.js"],"names":["APIBASEURL","App","useState","districtList","setDistrictList","centerList","setCenterList","district","setDistrict","distRef","useRef","current","timerId","loading","setLoading","loadingDist","setLoadingDist","INTERVAL","useEffect","axios","get","then","resp","data","districts","length","district_id","catch","e","alert","setTimeout","tick","clearTimeout","getData","dateInput","moment","format","centers","className","map","districtItem","onClick","district_name","center","name","block_name","fee_type","address","pincode","sessions","session","available_capacity","vaccine","date","min_age_limit","max_age_limit","available_capacity_dose1","available_capacity_dose2","slots","slot","session_id","center_id","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.970b7e5b.chunk.js","sourcesContent":["import './App.css';\nimport React, { useEffect, useState, useRef } from 'react';\nimport axios from 'axios';\nimport moment from 'moment';\nconst APIBASEURL = 'https://cdn-api.co-vin.in/api/v2';\nconst DISTRICTLISTENDPOINT = '/admin/location/districts/';\nconst KERALANUMBER = '17';\nconst DATABYDISTRICTENDPOINT = '/appointment/sessions/public/calendarByDistrict?&district_id=';\n\nfunction App() {\n  const [districtList, setDistrictList] = useState([]);\n  const [centerList, setCenterList] = useState([]);\n  const [district, setDistrict] = useState('');\n  const distRef = useRef(district);\n  distRef.current = district;\n  const [loading, setLoading] = useState(false);\n  const [loadingDist, setLoadingDist] = useState(false);\n  let timerId;\n  const INTERVAL = 10000;\n  useEffect(() => {\n    setLoadingDist(true);\n    axios.get(`${APIBASEURL}${DISTRICTLISTENDPOINT}${KERALANUMBER}`)\n      .then(resp => {\n        setDistrictList(resp.data.districts || []);\n        setLoadingDist(false);\n        resp.data.districts && resp.data.districts.length > 0 && setDistrict(resp.data.districts[0].district_id);\n      })\n      .catch(e => {\n        alert(\"error:\", e)\n        setLoadingDist(false);\n      })\n    //nested settimeout to refresh data every given interval\n    timerId = setTimeout(function tick() {\n      clearTimeout(timerId);\n      getData();\n      timerId = setTimeout(tick, INTERVAL);\n    }, INTERVAL);\n    return () => clearTimeout(timerId);\n  }, []);\n  useEffect(() => {\n    getData();\n  }, [district]);\n  const getData = () => {\n    setLoading(true);\n    const dateInput = moment().format('DD-MM-YYYY');\n    distRef.current && axios.get(`${APIBASEURL}${DATABYDISTRICTENDPOINT}${distRef.current}&date=${dateInput}`)\n      .then(resp => {\n        setCenterList(resp.data.centers);\n        setLoading(false);\n      })\n      .catch(e => {\n        alert(\"error:\", e);\n        setLoading(false);\n      })\n  }\n  return (\n    <div className=\"App\">\n      <div>Select your district to see Covid vaccine slots</div>\n      <div className='distList'>\n        {\n          loadingDist === true ? 'Loading...'\n            : <>\n              {\n                districtList.length > 0 ?\n                  <div className=''>\n                    {districtList.map(districtItem => {\n                      return (\n                        <div className={districtItem.district_id === district ? 'chatItem selectedDist' : 'chatItem'} key={districtItem.district_id} onClick={() => setDistrict(districtItem.district_id)}>{districtItem.district_name}</div>\n                      )\n                    })}\n                  </div>\n                  : 'No Districts available'\n              }\n            </>\n        }\n      </div>\n      <div>Data will auto refresh in every {INTERVAL/1000} seconds.</div>\n      <div className='chatWindow'>\n        {\n          loading === true ? 'Loading...'\n            :\n            centerList.length > 0 ? centerList.map(center => {\n              return (\n                <div key={center.center_id} className='messageInBubble'>\n                  <div className='centerTitle'>\n                    <div className='centerName'>{center.name}-{center.block_name}</div>\n                    <div className={center.fee_type === 'Free' ? 'greenText centerFee' : 'redText centerFee'}>{center.fee_type}</div>\n                  </div>\n                  <div className='centerAddress'>{center.address} - {center.pincode}</div>\n                  {\n                    center.sessions.length > 0 && center.sessions.map(session => {\n                      return (\n                        <div key={session.session_id} className={session.available_capacity ? 'availableBG sessionContainer' : 'notAvailableBG sessionContainer'}>\n                          <div className='vaccineName'>{session.vaccine}</div>\n                          <div className='vaccineDate'>{session.date}</div>\n                          <div className='vaccineCapacity'>Age limit: {session.min_age_limit || 'NA'} to {session.max_age_limit || 'NA'}, Dose1: {session.available_capacity_dose1}, Dose2: {session.available_capacity_dose2}</div>\n                          <div className='slotContainer'>\n                            {\n                              session.slots.length > 0 && session.slots.map(slot => {\n                                return (\n                                  <div key={slot} className='slotTime'>{slot}</div>\n                                )\n                              })\n                            }\n                          </div>\n                        </div>\n                      )\n                    })\n                  }\n                </div>\n              )\n            })\n              : 'No Centers are available for the selected district. Refresh after some time.'\n        }\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}