(this.webpackJsonpvaccinapp=this.webpackJsonpvaccinapp||[]).push([[0],{22:function(e,t,c){},24:function(e,t,c){},45:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),a=c(16),i=c.n(a),r=(c(22),c(6)),l=c.n(r),o=c(17),d=c(3),u=(c(24),c(7)),j=c.n(u),b=c(4),h=c.n(b),m=c(0),v="https://cdn-api.co-vin.in/api/v2";var p=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)([]),i=Object(d.a)(a,2),r=i[0],u=i[1],b=Object(n.useState)(""),p=Object(d.a)(b,2),f=p[0],O=p[1],g=Object(n.useRef)(f);g.current=f;var x=Object(n.useState)(!1),N=Object(d.a)(x,2),_=N[0],y=N[1],S=Object(n.useRef)(_);S.current=_;var C=Object(n.useState)(!1),D=Object(d.a)(C,2),I=D[0],F=D[1],T=Object(n.useState)(h()().format("LTS")),A=Object(d.a)(T,2),L=A[0],R=A[1],k=Object(n.useRef)(null);Object(n.useEffect)((function(){return F(!0),j.a.get("".concat(v).concat("/admin/location/districts/").concat("17")).then((function(e){s(e.data.districts||[]),F(!1),e.data.districts&&e.data.districts.length>0&&O(e.data.districts[0].district_id)})).catch((function(e){alert("error:",e),F(!1)})),function(){return clearInterval(k.current)}}),[]),Object(n.useEffect)((function(){console.log("cleared",k.current),clearInterval(k.current),w(),k.current=setInterval(w,1e4),console.log("new for next",k.current)}),[f]);var w=function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("distRef.current",g.current,"loadingRef.current",S.current,"timerId.current",k.current),g.current?(console.log("calling api"),y(!0),t=h()().format("DD-MM-YYYY"),j.a.get("".concat(v).concat("/appointment/sessions/public/calendarByDistrict?&district_id=").concat(g.current,"&date=").concat(t)).then((function(e){u(e.data.centers),y(!1),R(h()().format("LTS"))})).catch((function(e){alert("error:",e),y(!1)}))):console.log("skipped api");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("div",{children:"Select your district to see Covid vaccine slots"}),Object(m.jsx)("div",{className:"distList",children:!0===I?"Loading...":Object(m.jsx)(m.Fragment,{children:c.length>0?Object(m.jsx)("div",{className:"",children:c.map((function(e){return Object(m.jsx)("div",{className:e.district_id===f?"chatItem selectedDist":"chatItem",onClick:function(){return O(e.district_id)},children:e.district_name},e.district_id)}))}):"No Districts available"})}),Object(m.jsxs)("div",{children:["Auto refreshes in every ",10," seconds. Last refresh:",L]}),Object(m.jsx)("div",{className:"chatWindow",children:r.length>0?r.map((function(e){return Object(m.jsxs)("div",{className:"messageInBubble",children:[Object(m.jsxs)("div",{className:"centerTitle",children:[Object(m.jsxs)("div",{className:"centerName",children:[e.name,"-",e.block_name]}),Object(m.jsx)("div",{className:"Free"===e.fee_type?"greenText centerFee":"redText centerFee",children:e.fee_type})]}),Object(m.jsxs)("div",{className:"centerAddress",children:[e.address," - ",e.pincode]}),e.sessions.length>0&&e.sessions.map((function(e){return Object(m.jsxs)("div",{className:e.available_capacity?"availableBG sessionContainer":"notAvailableBG sessionContainer",children:[Object(m.jsx)("div",{className:"vaccineName",children:!0===_?"Refreshing...":e.vaccine}),Object(m.jsx)("div",{className:"vaccineDate",children:e.date}),Object(m.jsxs)("div",{className:"vaccineCapacity",children:[Object(m.jsxs)("span",{children:["Age limit: ",e.min_age_limit||"NA"," to ",e.max_age_limit||"NA"]})," ",Object(m.jsxs)("span",{children:["Dose1: ",e.available_capacity_dose1]})," ",Object(m.jsxs)("span",{children:["Dose2: ",e.available_capacity_dose2]})]}),Object(m.jsx)("div",{className:"slotContainer",children:e.slots.length>0&&e.slots.map((function(e,t){return Object(m.jsx)("div",{className:"slotTime",children:"".concat(e.time," (").concat(e.seats," seats)")},t)}))})]},e.session_id)}))]},e.center_id)})):"No Centers are available for the selected district. Refresh after some time."}),Object(m.jsxs)("div",{children:["Have suggestions? Please submit at ",Object(m.jsx)("a",{href:"https://github.com/imismailpe/vaccinapp",children:"https://github.com/imismailpe/vaccinapp"})]})]})},f=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,46)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,i=t.getTTFB;c(e),n(e),s(e),a(e),i(e)}))};i.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(p,{})}),document.getElementById("root")),f()}},[[45,1,2]]]);
//# sourceMappingURL=main.11cf4fde.chunk.js.map